description: >
  Triggers a pipeline and waits for a specific workflow to succeed.
usage:
  version: 2.1
  orbs:
    trigger-and-poll-pipeline: doramatadora/trigger-and-poll-pipeline@1.0.0
  workflows:
    trigger-workflow:
      jobs:
        - trigger-and-poll-pipeline/trigger:
            project_slug: github/doramatadora/trigger-and-poll-pipeline
            branch: develop
            definition_id: $DEFINITION_ID
            token: $CIRCLECI_PAT
            parameters: env=staging
            poll_interval: 10
            poll_timeout: 600
            workflow_name: build-and-test
